(function(i){var h=function(a){this.elem=null;this.step=0;this.stepInterval=400;this.interval=3E3;this.dir="left";this.hoverPause=this.autoPlay=!0;this.pausing=!1;this.timer=this.timerStep=null;this.init(a)};h.prototype={constructor:h,init:function(a){this.extend(a,this);if(!this.elem)return!1;this.elem.innerHTML+=this.elem.innerHTML;this.loadStyle();this.hoverPause&&this.bindEvents();this.autoPlay&&this.startScroll()},loadStyle:function(){var a=this.elem.children;if("left"==this.dir||"right"==this.dir)this.elem.style.width=a[0].offsetWidth*a.length+"px";"right"==this.dir&&0==this.elem.offsetLeft&&(this.elem.style.left=-this.elem.offsetWidth/2+"px");"left"==this.dir&&this.elem.offsetLeft==-this.elem.offsetWidth/2&&(this.elem.style.left=0);"down"==this.dir&&0==this.elem.offsetTop&&(this.elem.style.top=-this.elem.offsetHeight/2+"px");"up"==this.dir&&this.elem.offsetTop==-this.elem.offsetHeight/2&&(this.elem.style.top=0)},bindEvents:function(){var a=this;this.bind(this.elem.parentNode,"mouseover",function(){a.stop();a.pausing=!0});this.bind(this.elem.parentNode,"mouseout",function(){a.autoPlay&&a.startScroll();a.pausing=!1})},stop:function(){clearInterval(this.timer)},doScroll:function(){var a=this,b,d,g,c,f;"left"==this.dir||"right"==this.dir?(b="left",d="offsetLeft",f=this.elem.offsetWidth/2):(b="top",d="offsetTop",f=this.elem.offsetHeight/2);c="left"==this.dir||"up"==this.dir?-this.step:this.step;if(0==this.stepInterval)f-Math.abs(this.elem[d])<Math.abs(c)&&(c=c/Math.abs(c)*(f-Math.abs(this.elem[d]))),g=this.elem[d]+c,g=this.fixTarget(c,this.elem[d]+c,f),this.elem.style[b]=g+"px";else if(null==this.timerStep){this.stop();var e=50/a.stepInterval*c,e=0>e?Math.ceil(e):Math.floor(e);this.timerStep=setInterval(function(){e=e>0?Math.min(e,c):Math.max(e,c);g=a.fixTarget(e,a.elem[d]+e,f);a.elem.style[b]=g+"px";c=c-e;if(c==0){clearInterval(a.timerStep);a.timerStep=null;a.autoPlay&&!a.pausing&&a.startScroll()}},30)}},fixTarget:function(a,b,d){return 0>a&&Math.abs(b)>=d?0:0<a&&0<=b?-d:b},changeDir:function(a){this.dir=a;this.loadStyle();this.doScroll()},startScroll:function(){var a=this;this.timer=setInterval(function(){a.doScroll()},a.interval)},extend:function(a,b){for(name in a)b[name]=a[name]},bind:function(a,b,d){a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent?a.attachEvent("on"+b,d):a["on"+b]=hanlder}};i.Marquee=h})(window);